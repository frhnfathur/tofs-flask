<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard TOFS PHE ONWJ</title>
  
  <link href="/static/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css" />
  <link href="/static/css/sb-admin-2.min.css" rel="stylesheet" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/css/bootstrap-datepicker.min.css"
    integrity="sha512-rjbbID8nlPpCDpQMs4rrj0xGo/Ip8CE9i50U3qRUIxP4uDijx0Zr6m2NwFuJPz+yHXb3d3VnGu5IJQ9n71Fk4Q=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <link href="{{ url_for('static', filename='css/custom.css') }}" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
</head>

<body id="page-top">
  <div id="wrapper" class="{% if request.endpoint in ['login', 'register'] %}no-sidebar{% endif %}">
    {% if request.endpoint not in ['login', 'register'] %}
    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion position-fixed" id="accordionSidebar" >
  <!-- Brand -->
  <a class="sidebar-brand d-flex align-items-center justify-content-center" href="{{ url_for('index') }}">
    <div class="sidebar-brand-icon">
        <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo TOFS" class="img-fluid" style="max-height:40px;">
    </div>
  </a>

  <hr class="sidebar-divider my-0">

  <!-- Nav Item - Dashboard -->
  <li class="nav-item {% if request.endpoint == 'dashboard' %}active{% endif %}">
    <a class="nav-link" href="{{ url_for('dashboard') }}">
      <i class="fas fa-fw fa-chart-area"></i>
      <span>Dashboard</span>
    </a>
  </li>

  <!-- Nav Item - Data TOFS -->
  <li class="nav-item {% if request.endpoint == 'index' %}active{% endif %}">
    <a class="nav-link" href="{{ url_for('index') }}">
      <i class="fas fa-fw fa-table"></i>
      <span>Data TOFS</span>
    </a>
  </li>

  <!-- Nav Item - Input TOFS -->
  <li class="nav-item {% if request.endpoint == 'add' %}active{% endif %}">
    <a class="nav-link" href="{{ url_for('add') }}">
      <i class="fas fa-fw fa-plus"></i>
      <span>Input Data TOFS</span>
    </a>
  </li>

  <!-- Nav Item - Data User (hanya untuk super admin) -->
  {% if current_user.is_authenticated and current_user.role == 'super admin' %}
  <li class="nav-item {% if request.endpoint == 'users' %}active{% endif %}">
    <a class="nav-link" href="{{ url_for('users') }}">
      <i class="fas fa-fw fa-users"></i>
      <span>Data User</span>
    </a>
  </li>
  {% endif %}

  <!-- Sidebar Footer -->
    <li class="nav-item mt-auto">
      <div class="px-3 pb-3 text-white small">
    {% if current_user.is_authenticated %}
      <div class="fw-bold fs-6 fs-sm-5 fs-md-4 responsive-small-text">ðŸ‘‹ {{ current_user.full_name }}</div>
      <div class="fs-7 fs-sm-6 fs-md-5 responsive-small-text">{{ current_user.role|title }}</div>
      <a href="{{ url_for('logout') }}" class="btn btn-sm btn-danger mt-2 w-100 text-start">
        <i class="fas fa-sign-out-alt"></i> Logout
      </a>
    {% else %}
      <a href="{{ url_for('login') }}" class="btn btn-sm btn-light text-dark mt-2 w-100 text-start">
        <i class="fas fa-sign-in-alt"></i> Login
      </a>
      {% endif %}
      </div>
    </li>
</ul>
{% endif %}

    
    <div id="content-wrapper" class="d-flex flex-column {% if request.endpoint in ['login', 'register'] %}w-100{% endif %}">
    <div id="content" class="container-fluid {% if request.endpoint in ['login', 'register'] %}p-0 m-0{% endif %}">
        <nav class="navbar navbar-light bg-light d-md-none">
            <button class="btn btn-primary" id="sidebarToggleMobile">
            <i class="fas fa-bars"></i>
            </button>
        </nav>
        {% block content %}
        <!-- konten halaman akan di-override di child template -->
        {% endblock %}
      </div>
    </div>
  </div>

  

  <!-- Script -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="/static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/static/vendor/jquery-easing/jquery.easing.min.js"></script>
  <script src="/static/js/sb-admin-2.min.js"></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/js/bootstrap-datepicker.min.js"
    integrity="sha512-nvG7WwXoP7JqAP2InlAnmJb4cYmLBvvWyGeGTDH4F0GHfqT8zQ+hAaZZnHZNRJXB3yz4CLXJ5EmV6A1e9KqY1Q=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.0/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script>
    $(document).ready(function () {
      $('.datepicker').datepicker({
        format: 'dd/mm/yyyy',
        autoclose: true,
        todayHighlight: true,
        orientation: 'bottom'
      });
      $('.select2').select2({
        width: '100%',
        theme: 'bootstrap4',
        placeholder: 'Pilih'
      });
    });
  </script>

  <script>
  $(document).ready(function () {
    $('#sidebarToggleMobile').on('click', function () {
      $('#accordionSidebar').toggleClass('sidebar-visible');
    });

    // Opsional: klik di luar sidebar untuk menutupnya (mobile saja)
    $(document).on('click', function (e) {
      if (
        $(window).width() < 768 &&
        !$(e.target).closest('#accordionSidebar, #sidebarToggleMobile').length
      ) {
        $('#accordionSidebar').removeClass('sidebar-visible');
      }
    });
  });
</script>

  {% block scripts %}
  <!-- Optional block untuk menambahkan script khusus di child template -->
  {% endblock %}
</body>

<footer class="bg-light text-center text-muted py-3 mt-4">
  <div class="container">
    <small>Â© 2025 Farhan Fadhurrahman. All rights reserved.</small>
  </div>
</footer>
</html>
